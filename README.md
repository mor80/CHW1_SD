# Отчет БДЗ по КПО

## 1. Общая идея решения

В данном решении реализован модуль для управления личными финансами, который позволяет:
- **Создавать, редактировать и удалять**:
    - Счета (BankAccount)
    - Категории (Category)
    - Операции (Operation) (доходы/расходы)
- **Обновлять баланс счета** при создании, изменении и удалении операций.
- **Интерактивно взаимодействовать с пользователем** через консольное меню, которое разделено на три основных раздела:
    - Управление счетами
    - Управление категориями
    - Управление операциями

Пользователь может выбирать объекты для редактирования или удаления.

В решении реализовано 3 проекта: Консольное приложение `FinApp`, Бибилиотека классов `ClassLibrary`, xUnit тесты `FinTest`.

Для обеспечения гибкости и возможности масштабирования решения реализован DI‑контейнер, что позволяет легко заменять реализации (например, контейнеров) и проводить модульное тестирование.

## 2. Принципы SOLID и GRASP

В решении реализованы следующие принципы:

### SOLID
- **Single Responsibility (Принцип единственной ответственности):**  
  Каждый класс отвечает за свою задачу. Например, классы доменной модели (BankAccount, Category, Operation) отвечают за хранение данных, а классы фасада и контейнеров – за бизнес-логику и доступ к данным.  
  *Классы: BankAccount, Category, Operation, FinanceFacade, репозитории в папке Containers.*

- **Open/Closed (Принцип открытости/закрытости):**  
  Система расширяемая за счет применения паттернов, например, через декораторы (TimingCommandDecorator) и наблюдателей (Observer). Новую функциональность можно добавлять, не изменяя существующий код.  
  *Классы: TimingCommandDecorator, Observer-реализации.*

- **Liskov Substitution (Принцип подстановки Лисков):**  
  Все реализации интерфейсов (например, контейнеры, фабрика) могут заменять базовые типы, что обеспечивает возможность использования разных реализаций без изменения кода бизнес-логики.  
  *Интерфейсы: IBankAccountContainer, ICategoryContainer, IOperationContainer, IDomainFactory.*

- **Interface Segregation (Принцип разделения интерфейсов):**  
  Интерфейсы разделены по функциональности, например, интерфейсы для работы с различными сущностями (счета, категории, операции) имеют минимально необходимые методы.  
  *Интерфейсы: IBankAccountContainer, ICategoryContainer, IOperationContainer, ICommand, IOperationObserver.*

- **Dependency Inversion (Принцип инверсии зависимостей):**  
  Фасад, команды и другие классы зависят от абстракций (интерфейсов), а не от конкретных реализаций. DI‑контейнер обеспечивает внедрение зависимостей, что улучшает тестируемость и расширяемость системы.  
  *Классы: FinanceFacade, DI‑настройка в ProgramUI и ConfigureServices.*

### GRASP
- **High Cohesion (Высокая связность):**  
  Каждый класс выполняет четко определенную задачу. Например, класс FinanceFacade объединяет операции над доменными объектами, а классы контейнеров отвечают за доступ к данным.  
  *Классы: FinanceFacade, контейнеры, DomainFactory.*

- **Low Coupling (Низкая связанность):**  
  Взаимодействие между модулями осуществляется через четко определенные интерфейсы, что позволяет изменять или заменять реализации без влияния на остальную систему.  
  *Классы: Все классы, взаимодействующие через интерфейсы (например, контейнеры, фабрика, команды).*

## 3. Реализованные паттерны GoF

В решении использованы следующие паттерны, предложенные Gang of Four (GoF):

### Фабрика (Factory)
- **Реализация:**  
  Класс `DomainFactory` отвечает за создание объектов доменной модели (`BankAccount`, `Category`, `Operation`).
- **Важность:**  
  Централизованное создание объектов позволяет обеспечить единообразие и валидацию создаваемых объектов. В случае изменений логики создания объектов, изменения необходимо внести только в фабрике, а не в каждом месте вызова.

### Фасад (Facade)
- **Реализация:**  
  Класс `FinanceFacade` объединяет операции создания, редактирования и удаления доменных объектов, а также обновление баланса счета и уведомление наблюдателей.
- **Важность:**  
  Объединение связанных операций в одном классе упрощает использование системы, скрывая детали реализации (например, работу с контейнерами) от клиента.

### Команда (Command) с Декоратором (Decorator)
- **Реализация:**  
  Классы `CreateOperationCommand` и `TimingCommandDecorator` позволяют инкапсулировать сценарии (например, создание операции) и измерять время их выполнения.
- **Важность:**  
  Паттерн Команда обеспечивает гибкое управление действиями, а декоратор позволяет добавлять дополнительное поведение (измерение времени) без изменения исходного кода команд.

### Наблюдатель (Observer)
- **Реализация:**  
  Интерфейс `IOperationObserver` и его реализации (например, `ConsoleOperationObserver`) позволяют уведомлять подписчиков о создании новой операции.
- **Важность:**  
  Позволяет отделить логику уведомлений (например, логирование или обновление UI) от основной бизнес-логики, улучшая масштабируемость и расширяемость системы.

## Заключение

Решение удовлетворяет основным требованиям по функциональности, а также демонстрирует применение ключевых принципов SOLID и GRASP для построения гибкой и масштабируемой архитектуры. Реализованные паттерны GoF позволяют обеспечить чистоту кода, единообразное создание объектов и управление поведением системы. Кроме того, использование DI‑контейнера обеспечивает высокую тестируемость и легкость замены компонентов системы.

Для запуска приложения использована консольная реализация с интуитивно понятным меню, а тесты на xUnit покрывают критичные случаи работы фасада, фабрики, команд и наблюдателей.
